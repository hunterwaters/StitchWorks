{"ast":null,"code":"import React,{useEffect}from'react';import{addToCart}from'../actions/cartActions';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import{createOrder}from'../actions/orderActions';import CheckoutSteps from'../components/CheckoutSteps';function PlaceOrderScreen(props){var cart=useSelector(function(state){return state.cart;});var orderCreate=useSelector(function(state){return state.orderCreate;});var loading=orderCreate.loading,success=orderCreate.success,error=orderCreate.error,order=orderCreate.order;var cartItems=cart.cartItems,shipping=cart.shipping,payment=cart.payment;if(!shipping.address){props.history.push(\"/shipping\");}else if(!payment.paymentMethod){props.history.push(\"/payment\");}var itemsPrice=cartItems.reduce(function(a,c){return a+c.price*c.qty;},0);var shippingPrice=itemsPrice>100?0:.01;var taxPrice=0.15*itemsPrice;var totalPrice=itemsPrice+shippingPrice+taxPrice;var dispatch=useDispatch();var placeOrderHandler=function placeOrderHandler(){dispatch(createOrder({orderItmes:cartItems,shipping:shipping,payment:payment,itemsPrice:itemsPrice,shippingPrice:shippingPrice,taxPrice:taxPrice,totalPrice:totalPrice}));};useEffect(function(){if(success){props.history.push(\"/order/\"+order._id);}},[success]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder\"},/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder-info\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Shipping\"),/*#__PURE__*/React.createElement(\"div\",null,cart.shipping.address,\", \",cart.shipping.city,\", \",cart.shipping.postalCode,\", \",cart.shipping.country),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Payment\"),/*#__PURE__*/React.createElement(\"div\",null,\"Payment Method: \",cart.payment.paymentMethod)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"ul\",{className:\"cart-list-container\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Shopping Cart\"),/*#__PURE__*/React.createElement(\"div\",null,\"Price\")),cartItems.length===0?/*#__PURE__*/React.createElement(\"div\",null,\"Cart is empty\"):cartItems.map(function(item){return/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"cart-image\"},/*#__PURE__*/React.createElement(\"img\",{src:item.image,alt:\"product\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-name\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Link,{to:\"/product/\"+item.product},item.name)),/*#__PURE__*/React.createElement(\"div\",null,\"Qty: \",item.qty)),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-price\"},\"$\",item.price));}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder-action\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{onClick:placeOrderHandler,className:\"button full-width\"},\"Place Order\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Order Summary\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Items\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",itemsPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Shipping\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",shippingPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Tax\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",taxPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Order Total\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",totalPrice))))));}export default PlaceOrderScreen;","map":{"version":3,"sources":["/Users/hunterrwaters/Desktop/e-commerce/frontend/src/screens/PlaceOrderScreen.js"],"names":["React","useEffect","addToCart","useDispatch","useSelector","Link","createOrder","CheckoutSteps","PlaceOrderScreen","props","cart","state","orderCreate","loading","success","error","order","cartItems","shipping","payment","address","history","push","paymentMethod","itemsPrice","reduce","a","c","price","qty","shippingPrice","taxPrice","totalPrice","dispatch","placeOrderHandler","orderItmes","_id","city","postalCode","country","length","map","item","image","product","name"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react';\nimport {addToCart} from '../actions/cartActions';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {Link} from 'react-router-dom';\nimport {createOrder} from '../actions/orderActions';\nimport CheckoutSteps from '../components/CheckoutSteps'\n\nfunction PlaceOrderScreen(props) {\n    const cart = useSelector(state => state.cart);\n    const orderCreate = useSelector(state => state.orderCreate);\n    const {loading, success, error, order} = orderCreate;\n\nconst {cartItems, shipping, payment} = cart;\nif(!shipping.address) {\n    props.history.push(\"/shipping\")\n} else if(!payment.paymentMethod) {\n    props.history.push(\"/payment\")\n} \nconst itemsPrice = cartItems.reduce((a,c) => a + c.price*c.qty, 0);\nconst shippingPrice = itemsPrice > 100 ?0 : .01;\nconst taxPrice = 0.15 * itemsPrice;\nconst totalPrice = itemsPrice + shippingPrice + taxPrice;\n\nconst dispatch = useDispatch();\nconst placeOrderHandler  = () => {\n    dispatch(createOrder({\n        orderItmes: cartItems, shipping, payment, itemsPrice, shippingPrice, taxPrice, totalPrice\n\n    }))\n}\nuseEffect(() => {\n    if(success) {\n        props.history.push(\"/order/\" + order._id)\n    }\n}, [success]);\n\n    return <div>\n    <CheckoutSteps step1 step2 step3 step4  ></CheckoutSteps>\n    <div className = \"placeorder\">\n        <div className = \"placeorder-info\">\n            <div>\n                <h3>Shipping</h3>\n                <div>\n                    {cart.shipping.address}, {cart.shipping.city}, {cart.shipping.postalCode}, {cart.shipping.country}\n                </div>\n                <div>\n                    <h3>Payment</h3>\n                    <div>\n                        Payment Method: {cart.payment.paymentMethod}\n                    </div>\n                </div>\n                <div>\n                <ul className = \"cart-list-container\">\n    <li>\n        <h3>\n            Shopping Cart\n        </h3>\n        <div>\n            Price\n        </div>\n    </li>\n    {\n        cartItems.length === 0 ?\n        <div>\n            Cart is empty\n        </div>\n        :\n        cartItems.map( item => \n            <li>\n                <div className = \"cart-image\">\n                <img src = {item.image} alt = \"product\" />\n                </div>\n                <div className = \"cart-name\">\n            <div>\n                <Link to ={\"/product/\" + item.product}>\n                {item.name}\n                </Link>\n            </div>\n            <div>\n                Qty: {item.qty}\n            </div>\n                </div>\n                <div className = \"cart-price\">\n                    ${item.price}\n                </div>\n            </li>\n        )\n    }\n        </ul>\n                </div>\n            </div>\n       \n        </div>\n        <div className = \"placeorder-action\">\n            <ul>\n                <li>\n                    <button onClick= {placeOrderHandler} className = \"button full-width\">Place Order</button>\n                </li>\n                <li>\n                    <h3>\n                        Order Summary\n                    </h3>\n                </li>\n                <li>\n                    <div>Items</div>\n                    <div>${itemsPrice}</div>\n                </li>\n                <li>\n                    <div>Shipping</div>\n                    <div>${shippingPrice}</div>\n                </li>\n                <li>\n                    <div>Tax</div>\n                    <div>${taxPrice}</div>\n                </li>\n                <li>\n                    <div>Order Total</div>\n                    <div>${totalPrice}</div>\n                </li>\n            </ul>\n        </div>\n    </div>\n    </div>\n}\n\nexport default PlaceOrderScreen;"]},"metadata":{},"sourceType":"module"}