{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hunterrwaters/Desktop/e-commerce/frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/hunterrwaters/Desktop/e-commerce/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/hunterrwaters/Desktop/e-commerce/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import ReactDOM from'react-dom';import axios from'axios';function PaypalButton(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),sdkReady=_useState2[0],setSdkReady=_useState2[1];var addPaypalSdk=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result,clientID,script;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/config/paypal\");case 2:result=_context.sent;clientID=result.data;script=document.createElement('script');script.type='text/javascript';script.src='https://www.paypal.com/sdk/js?client-id='+clientID;script.async=true;script.onload=function(){setSdkReady(true);};document.body.appendChild(script);case 10:case\"end\":return _context.stop();}}},_callee);}));return function addPaypalSdk(){return _ref.apply(this,arguments);};}();var _createOrder=function createOrder(data,actions){return actions.order.create({purchase_units:[{amount:{currency_code:'USD',value:props.amount}}]});};var _onApprove=function onApprove(data,actions){return actions.order.capture().then(function(details){return props.onSuccess(data,details);}).catch(function(err){return console.log(err);});};useEffect(function(){if(!window.paypal){addPaypalSdk();}return function(){};},[]);if(!sdkReady){return/*#__PURE__*/React.createElement(\"div\",null,\"Loading ...\");}var Button=window.paypal.Buttons.driver('react',{React:React,ReactDOM:ReactDOM});return/*#__PURE__*/React.createElement(Button,Object.assign({},props,{createOrder:function createOrder(data,actions){return _createOrder(data,actions);},onApprove:function onApprove(data,actions){return _onApprove(data,actions);}}));}export default PaypalButton;","map":{"version":3,"sources":["/Users/hunterrwaters/Desktop/e-commerce/frontend/src/components/PaypalButton.js"],"names":["React","useEffect","useState","ReactDOM","axios","PaypalButton","props","sdkReady","setSdkReady","addPaypalSdk","get","result","clientID","data","script","document","createElement","type","src","async","onload","body","appendChild","createOrder","actions","order","create","purchase_units","amount","currency_code","value","onApprove","capture","then","details","onSuccess","catch","err","console","log","window","paypal","Button","Buttons","driver"],"mappings":"sYAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,MAAOC,CAAAA,QAAP,KAAqB,WAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAGA,QAASC,CAAAA,YAAT,CAAsBC,KAAtB,CAA6B,eAEOJ,QAAQ,CAAC,KAAD,CAFf,wCAElBK,QAFkB,eAERC,WAFQ,eAIzB,GAAMC,CAAAA,YAAY,0FAAG,oLACIL,CAAAA,KAAK,CAACM,GAAN,CAAU,oBAAV,CADJ,QACXC,MADW,eAEXC,QAFW,CAEAD,MAAM,CAACE,IAFP,CAGXC,MAHW,CAGFC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAHE,CAIjBF,MAAM,CAACG,IAAP,CAAc,iBAAd,CACAH,MAAM,CAACI,GAAP,CAAa,2CAA6CN,QAA1D,CACAE,MAAM,CAACK,KAAP,CAAe,IAAf,CACAL,MAAM,CAACM,MAAP,CAAgB,UAAM,CAClBZ,WAAW,CAAC,IAAD,CAAX,CACH,CAFD,CAGAO,QAAQ,CAACM,IAAT,CAAcC,WAAd,CAA0BR,MAA1B,EAViB,uDAAH,kBAAZL,CAAAA,YAAY,0CAAlB,CAaA,GAAMc,CAAAA,YAAW,CAAG,QAAdA,CAAAA,WAAc,CAACV,IAAD,CAAOW,OAAP,QAAmBA,CAAAA,OAAO,CAACC,KAAR,CAAcC,MAAd,CAAqB,CACxDC,cAAc,CAAE,CACZ,CACIC,MAAM,CAAE,CACJC,aAAa,CAAE,KADX,CAEJC,KAAK,CAAExB,KAAK,CAACsB,MAFT,CADZ,CADY,CADwC,CAArB,CAAnB,EAApB,CAWA,GAAMG,CAAAA,UAAS,CAAG,QAAZA,CAAAA,SAAY,CAAClB,IAAD,CAAOW,OAAP,QAAmBA,CAAAA,OAAO,CAACC,KAAR,CACpCO,OADoC,GAEpCC,IAFoC,CAE/B,SAAAC,OAAO,QAAI5B,CAAAA,KAAK,CAAC6B,SAAN,CAAgBtB,IAAhB,CAAsBqB,OAAtB,CAAJ,EAFwB,EAGpCE,KAHoC,CAG9B,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAH2B,CAAnB,EAAlB,CAKApC,SAAS,CAAC,UAAM,CACZ,GAAG,CAACuC,MAAM,CAACC,MAAX,CAAmB,CACfhC,YAAY,GACf,CACD,MAAO,WAAM,CACZ,CADD,CAEH,CANQ,CAMN,EANM,CAAT,CAOA,GAAG,CAACF,QAAJ,CAAc,CACT,mBAAO,6CAAP,CACJ,CAED,GAAMmC,CAAAA,MAAM,CAAGF,MAAM,CAACC,MAAP,CAAcE,OAAd,CAAsBC,MAAtB,CAA6B,OAA7B,CAAsC,CAAC5C,KAAK,CAALA,KAAD,CAAQG,QAAQ,CAARA,QAAR,CAAtC,CAAf,CAEA,mBAAO,oBAAC,MAAD,kBAAYG,KAAZ,EAAmB,WAAW,CAAE,qBAAEO,IAAF,CAAQW,OAAR,QAAoBD,CAAAA,YAAW,CAACV,IAAD,CAAOW,OAAP,CAA/B,EAAhC,CACP,SAAS,CAAE,mBAAEX,IAAF,CAAQW,OAAR,QAAoBO,CAAAA,UAAS,CAAClB,IAAD,CAAOW,OAAP,CAA7B,EADJ,GAAP,CAEH,CAED,cAAenB,CAAAA,YAAf","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport ReactDOM from 'react-dom';\nimport axios from 'axios';\n\n\nfunction PaypalButton(props) {\n\n    const [sdkReady, setSdkReady] = useState(false);\n\n    const addPaypalSdk = async() => {\n        const result = await axios.get(\"/api/config/paypal\");\n        const clientID = result.data;\n        const script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.src = 'https://www.paypal.com/sdk/js?client-id=' + clientID;\n        script.async = true;\n        script.onload = () => {\n            setSdkReady(true)\n        }\n        document.body.appendChild(script);\n    }\n\n    const createOrder = (data, actions) => actions.order.create({\n        purchase_units: [\n            {\n                amount: {\n                    currency_code: 'USD',\n                    value: props.amount\n                }\n            }\n        ]\n    });\n\n    const onApprove = (data, actions) => actions.order\n    .capture()\n    .then(details => props.onSuccess(data, details))\n    .catch(err => console.log(err));\n    \n    useEffect(() => {\n        if(!window.paypal) {\n            addPaypalSdk();\n        }\n        return () => {\n        }\n    }, [])\n    if(!sdkReady) {\n         return <div>Loading ...</div>\n    } \n\n    const Button = window.paypal.Buttons.driver('react', {React, ReactDOM});\n\n    return <Button {...props} createOrder={( data, actions) => createOrder(data, actions)}\n    onApprove={( data, actions) => onApprove(data, actions)} />\n}\n\nexport default PaypalButton"]},"metadata":{},"sourceType":"module"}